## char

定长255，根据规定长度分配存储空间；



## varchar

根据实际存储的数据分配存储空间；

varchar在MySQL中必须满足最大行宽度限制，65535(64K)字节；

1)使用utf-8字符编码集varchar最大长度是(65535-2)/3 = 21844个字符(超过255个字节会有⒉字节的额外占用空间开销，所以减2，如果是255以下，则减1)。

2）使用utf-8mb4字符集，MySQL中使用utf-8mb4字符集一个字符占用4个字节，所以varchar最大长度是(65535-2)/4 = 16383个字符(超过255个字节会有2字节的额外占用空间开销，所以减2，如果是255以下，则减1)。



## Text

最大限制也是64k个字节，但是本质是溢出存储，InnoDB默认只会存放前768字节在数据页中，而剩余的数据则会存储在溢出段中,虽然也受单表65535最大行宽度限制，但MySQL表中每个BLOB和TEXT列实际只占其中的5至9个字节，其他部分将进行溢出存储。所以实际占用表最大行宽度为9+2字节，外加的是额外开销，跟表的实际宽度没有关系:

1）如果使用utf-8字符集，那么单字段占用最大长度也是21844个字符。

2)不过单表可以设置多个text字段，这就突破了单表最大行宽度65535的限制。

LongText ：最大限制4G个字节，支持溢出存储，实际占用表最大行宽度 9+4 字节

mediumText：最大限制16M字节，支持溢出存储，实际占用表最大行宽度9+3字节；



虽然text字段会把超过768字节的大部分数据溢出部分存放到硬盘其他空间，看起来会增加磁盘压力，而相比于varchar的存储的处理，varchar也是加载一个数据页16K的内容，溢出部分还是要读取硬盘加载数据



text字段，MySQL不允许有默认值。建立索引必须给出前缀索引长度。

varchar允许有默认值，对索引长度没限制。



根据存储的实现:可以考虑用varchar替代 text，因为varchar存储更弹性，存储数据少的话性能更高。

如果存储的数据大于64K，就必须使用到mediumtext，longtext，因为varchar 已经存不下了。

如果varchar(255+)之后，和text在存储机制是一样的，性能也相差无几。需要特别注意varchar(255)不只是255byte，实质上有可能占用的更多。